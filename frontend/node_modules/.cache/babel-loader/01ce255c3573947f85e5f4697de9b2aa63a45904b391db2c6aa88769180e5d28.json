{"ast":null,"code":"import _slicedToArray from\"C:/Users/oneco/Documents/Software-Development/Extended Course/milestone3/milestone3/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useContext,useState,useEffect}from'react';import{CurrentUserContext}from'./contexts/CurrentUser';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function BreweryCard(_ref){var brewery=_ref.brewery;var _useState=useState(0),_useState2=_slicedToArray(_useState,2),rating=_useState2[0],setRating=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),comment=_useState4[0],setComment=_useState4[1];var _useContext=useContext(CurrentUserContext),user=_useContext.user;// getting the current user from the context\nvar user_id=user?user.id:null;// getting the user_id from the user object\nvar _useState5=useState(brewery.id),_useState6=_slicedToArray(_useState5,2),Brewery_id=_useState6[0],setBreweryId=_useState6[1];useEffect(function(){setBreweryId(brewery.id);},[brewery]);function handleSubmit(e){e.preventDefault();var data={rating:rating,comment:comment,user_id:user_id,// passing the user_id to the data object\nBrewery_id:Brewery_id};fetch('http://localhost:5000/ratingsAndcomments',{method:'POST',body:JSON.stringify(data),headers:{'Content-Type':'application/json'}}).then(function(response){return response.json();}).then(function(data){console.log('Success:',data);}).catch(function(error){console.error('Error:',error);});};return/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"h2\",{children:brewery.name}),/*#__PURE__*/_jsxs(\"h3\",{children:[\"Brewery Type:  \",brewery.brewery_type]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Located at: \",brewery.street,\" - \",brewery.city,\" - \",brewery.state]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Phone: \",brewery.phone]}),/*#__PURE__*/_jsx(\"a\",{href:brewery.website_url,children:brewery.website_url}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"input\",{type:\"hidden\",name:\"Brewery_id\",value:Brewery_id}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Rating:\",/*#__PURE__*/_jsx(\"input\",{type:\"number\",min:\"1\",max:\"5\",value:rating,onChange:function onChange(e){return setRating(e.target.value);},name:\"rating\"})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Comment:\",/*#__PURE__*/_jsx(\"textarea\",{value:comment,onChange:function onChange(e){return setComment(e.target.value);},name:\"comment\"})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Submit\"})]})]});}export default BreweryCard;","map":{"version":3,"names":["React","useContext","useState","useEffect","CurrentUserContext","BreweryCard","brewery","rating","setRating","comment","setComment","user","user_id","id","Brewery_id","setBreweryId","handleSubmit","e","preventDefault","data","fetch","method","body","JSON","stringify","headers","then","response","json","console","log","catch","error","name","brewery_type","street","city","state","phone","website_url","target","value"],"sources":["C:/Users/oneco/Documents/Software-Development/Extended Course/milestone3/milestone3/frontend/src/BreweryCard.js"],"sourcesContent":["import React, { useContext, useState, useEffect } from 'react';\r\nimport { CurrentUserContext } from './contexts/CurrentUser'\r\n\r\nfunction BreweryCard({ brewery }) {\r\n  const [rating, setRating] = useState(0);\r\n  const [comment, setComment] = useState(\"\");\r\n  const { user } = useContext(CurrentUserContext); // getting the current user from the context\r\n  const user_id = user ? user.id : null; // getting the user_id from the user object\r\n  const [Brewery_id, setBreweryId] = useState(brewery.id);\r\n  useEffect(() => {\r\n    setBreweryId(brewery.id);\r\n  }, [brewery]);\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n      const data = {\r\n        rating: rating,\r\n        comment: comment,\r\n        user_id: user_id, // passing the user_id to the data object\r\n        Brewery_id: Brewery_id\r\n    }\r\n\r\n    fetch('http://localhost:5000/ratingsAndcomments', {\r\n      method: 'POST',\r\n      body: JSON.stringify(data),\r\n      headers: { 'Content-Type': 'application/json' },\r\n    })\r\n      .then((response) => response.json())\r\n      .then((data) => {\r\n        console.log('Success:', data);\r\n      })\r\n      .catch((error) => {\r\n        console.error('Error:', error);\r\n      });\r\n  };\r\n\r\n\r\n  \r\n\r\n  return (\r\n    <div className=\"card\">\r\n      <h2>{brewery.name}</h2>\r\n      <h3>Brewery Type:  {brewery.brewery_type}</h3>\r\n      <p>Located at: {brewery.street} - {brewery.city} - {brewery.state}</p>\r\n      <p>Phone: {brewery.phone}</p>\r\n      <a href={brewery.website_url}>{brewery.website_url}</a>\r\n      <form onSubmit={handleSubmit}>\r\n      <input type=\"hidden\" name=\"Brewery_id\" value={Brewery_id} />\r\n        <label>\r\n          Rating:\r\n          <input\r\n            type=\"number\"\r\n            min=\"1\"\r\n            max=\"5\"\r\n            value={rating}\r\n            onChange={(e) => setRating(e.target.value)}\r\n            name=\"rating\"\r\n          />\r\n        </label>\r\n        <br />\r\n        <label>\r\n          Comment:\r\n          <textarea\r\n            value={comment}\r\n            onChange={(e) => setComment(e.target.value)}\r\n            name=\"comment\"\r\n          />\r\n        </label>\r\n        <br />\r\n        <button type=\"submit\">Submit</button>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default BreweryCard"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}
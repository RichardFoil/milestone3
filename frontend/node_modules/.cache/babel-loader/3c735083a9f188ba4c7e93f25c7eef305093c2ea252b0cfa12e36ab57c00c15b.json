{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/oneco/Documents/Software-Development/Extended Course/milestone3/milestone3/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/oneco/Documents/Software-Development/Extended Course/milestone3/milestone3/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/oneco/Documents/Software-Development/Extended Course/milestone3/milestone3/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{createContext,useState,useEffect}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";export var CurrentUserContext=/*#__PURE__*/createContext();function CurrentUserProvider(_ref){var children=_ref.children;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),currentUser=_useState2[0],setCurrentUser=_useState2[1];useEffect(function(){var getLoggedInUser=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,user;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return fetch('http://localhost:5000/authentication/profile',{headers:{'Authorization':\"Bearer \".concat(localStorage.getItem('token'))}});case 2:response=_context.sent;_context.next=5;return response.json();case 5:user=_context.sent;setCurrentUser(user);case 7:case\"end\":return _context.stop();}},_callee);}));return function getLoggedInUser(){return _ref2.apply(this,arguments);};}();getLoggedInUser();},[]);return/*#__PURE__*/_jsx(CurrentUserContext.Provider,{value:{currentUser:currentUser,setCurrentUser:setCurrentUser},children:children});}export default CurrentUserProvider;","map":{"version":3,"names":["createContext","useState","useEffect","CurrentUserContext","CurrentUserProvider","children","currentUser","setCurrentUser","getLoggedInUser","fetch","headers","localStorage","getItem","response","json","user"],"sources":["C:/Users/oneco/Documents/Software-Development/Extended Course/milestone3/milestone3/frontend/src/contexts/CurrentUser.js"],"sourcesContent":["import { createContext, useState, useEffect } from \"react\";\r\n\r\nexport const CurrentUserContext = createContext()\r\n\r\nfunction CurrentUserProvider({ children }){\r\n    const [currentUser, setCurrentUser] = useState(null)\r\n\r\n    useEffect(() => {\r\n        const getLoggedInUser = async () => {\r\n            let response = await fetch('http://localhost:5000/authentication/profile', {\r\n                headers: {\r\n                    'Authorization': `Bearer ${localStorage.getItem('token')}`\r\n                }\r\n            })\r\n            let user = await response.json()\r\n            setCurrentUser(user)\r\n        }\r\n        getLoggedInUser()\r\n    }, [])\r\n    return (\r\n        <CurrentUserContext.Provider value={{ currentUser, setCurrentUser }}>\r\n            {children}\r\n        </CurrentUserContext.Provider>\r\n    )\r\n}\r\n\r\nexport default CurrentUserProvider;\r\n\r\n\r\n"],"mappings":"siBAAA,OAASA,aAAa,CAAEC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAAC,2CAE3D,MAAO,IAAMC,mBAAkB,cAAGH,aAAa,EAAE,CAEjD,QAASI,oBAAmB,MAAc,IAAXC,SAAQ,MAARA,QAAQ,CACnC,cAAsCJ,QAAQ,CAAC,IAAI,CAAC,wCAA7CK,WAAW,eAAEC,cAAc,eAElCL,SAAS,CAAC,UAAM,CACZ,GAAMM,gBAAe,6FAAG,4KACCC,MAAK,CAAC,8CAA8C,CAAE,CACvEC,OAAO,CAAE,CACL,eAAe,kBAAYC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAC5D,CACJ,CAAC,CAAC,QAJEC,QAAQ,qCAKKA,SAAQ,CAACC,IAAI,EAAE,QAA5BC,IAAI,eACRR,cAAc,CAACQ,IAAI,CAAC,sDACvB,kBARKP,gBAAe,2CAQpB,CACDA,eAAe,EAAE,CACrB,CAAC,CAAE,EAAE,CAAC,CACN,mBACI,KAAC,kBAAkB,CAAC,QAAQ,EAAC,KAAK,CAAE,CAAEF,WAAW,CAAXA,WAAW,CAAEC,cAAc,CAAdA,cAAe,CAAE,UAC/DF,QAAQ,EACiB,CAEtC,CAEA,cAAeD,oBAAmB"},"metadata":{},"sourceType":"module","externalDependencies":[]}
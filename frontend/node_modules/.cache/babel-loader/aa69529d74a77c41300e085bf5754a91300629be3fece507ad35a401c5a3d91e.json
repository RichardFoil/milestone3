{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/oneco/Documents/Software-Development/Extended Course/milestone3/milestone3/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _objectSpread from\"C:/Users/oneco/Documents/Software-Development/Extended Course/milestone3/milestone3/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"C:/Users/oneco/Documents/Software-Development/Extended Course/milestone3/milestone3/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/oneco/Documents/Software-Development/Extended Course/milestone3/milestone3/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import'../App.css';import{useContext,useState}from\"react\";import{useNavigate}from\"react-router\";import{CurrentUserContext}from'../contexts/CurrentUser';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Login(){var navigate=useNavigate();var _useContext=useContext(CurrentUserContext),setCurrentUser=_useContext.setCurrentUser;var _useState=useState({email:'',password:''}),_useState2=_slicedToArray(_useState,2),credentials=_useState2[0],setCredentials=_useState2[1];function handleSubmit(_x){return _handleSubmit.apply(this,arguments);}function _handleSubmit(){_handleSubmit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var response,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:e.preventDefault();_context.next=3;return fetch(\"http://localhost:5000/authentication/\",{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(credentials)});case 3:response=_context.sent;_context.next=6;return response.json();case 6:data=_context.sent;if(response.status===200){localStorage.setItem('token',data.token);setCurrentUser(data.user);navigate(\"/\");}else{navigate('/login');}case 8:case\"end\":return _context.stop();}},_callee);}));return _handleSubmit.apply(this,arguments);}return/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"LoginContainer\",children:/*#__PURE__*/_jsx(\"div\",{className:\"form-container\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"form-style\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",children:\"Email:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",id:\"email\",name:\"email\",value:credentials.email,onChange:function onChange(e){return setCredentials(_objectSpread(_objectSpread({},credentials),{},{email:e.target.value}));}}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",children:\"Password:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"password\",name:\"password\",value:credentials.password,onChange:function onChange(e){return setCredentials(_objectSpread(_objectSpread({},credentials),{},{password:e.target.value}));}}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"submit\",value:\"Login\",className:\"submit-button\"})]})})})});}export default Login;","map":{"version":3,"names":["useContext","useState","useNavigate","CurrentUserContext","Login","navigate","setCurrentUser","email","password","credentials","setCredentials","handleSubmit","e","preventDefault","fetch","method","headers","body","JSON","stringify","response","json","data","status","localStorage","setItem","token","user","target","value"],"sources":["C:/Users/oneco/Documents/Software-Development/Extended Course/milestone3/milestone3/frontend/src/users/Login.js"],"sourcesContent":["import '../App.css';\r\nimport { useContext, useState } from \"react\"\r\nimport { useNavigate } from \"react-router\"\r\nimport { CurrentUserContext } from '../contexts/CurrentUser'\r\n\r\n\r\n\r\nfunction Login() {\r\n    const navigate = useNavigate();\r\n    const { setCurrentUser } = useContext(CurrentUserContext)\r\n    const [credentials, setCredentials] = useState({\r\n        email: '',\r\n        password: ''\r\n    });\r\n\r\n    async function handleSubmit(e) {\r\n        e.preventDefault();\r\n        const response = await fetch(`http://localhost:5000/authentication/`, {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify(credentials)\r\n        });\r\n        const data = await response.json();\r\n        if (response.status === 200) {\r\n            localStorage.setItem('token', data.token);\r\n            setCurrentUser(data.user);\r\n            navigate(`/`);\r\n        } else {\r\n            navigate('/login');\r\n        }\r\n    }\r\n\r\n  return (\r\n    <div className='container'>\r\n    <div className=\"LoginContainer\">\r\n      <div className=\"form-container\">\r\n      <form onSubmit={handleSubmit} className=\"form-style\">\r\n        <label htmlFor=\"email\">Email:</label>\r\n        <input\r\n          type=\"email\"\r\n          id=\"email\"\r\n          name=\"email\"\r\n          value={credentials.email}\r\n          onChange={e => setCredentials({ ...credentials, email: e.target.value })}\r\n        />\r\n        <br />\r\n        <br />\r\n        <label htmlFor=\"password\">Password:</label>\r\n        <input\r\n          type=\"password\"\r\n          id=\"password\"\r\n          name=\"password\"\r\n          value={credentials.password}\r\n          onChange={e => setCredentials({ ...credentials, password: e.target.value })}\r\n        />\r\n        <br />\r\n        <br />\r\n        <input type=\"submit\" value=\"Login\" className=\"submit-button\" />\r\n      </form>\r\n    </div>\r\n    </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Login;\r\n\r\n"],"mappings":"utBAAA,MAAO,YAAY,CACnB,OAASA,UAAU,CAAEC,QAAQ,KAAQ,OAAO,CAC5C,OAASC,WAAW,KAAQ,cAAc,CAC1C,OAASC,kBAAkB,KAAQ,yBAAyB,yFAI5D,QAASC,MAAK,EAAG,CACb,GAAMC,SAAQ,CAAGH,WAAW,EAAE,CAC9B,gBAA2BF,UAAU,CAACG,kBAAkB,CAAC,CAAjDG,cAAc,aAAdA,cAAc,CACtB,cAAsCL,QAAQ,CAAC,CAC3CM,KAAK,CAAE,EAAE,CACTC,QAAQ,CAAE,EACd,CAAC,CAAC,wCAHKC,WAAW,eAAEC,cAAc,eAG/B,QAEYC,aAAY,kJAA3B,iBAA4BC,CAAC,qIACzBA,CAAC,CAACC,cAAc,EAAE,CAAC,sBACIC,MAAK,yCAA0C,CAClEC,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CACL,cAAc,CAAE,kBACpB,CAAC,CACDC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAACV,WAAW,CACpC,CAAC,CAAC,QANIW,QAAQ,qCAOKA,SAAQ,CAACC,IAAI,EAAE,QAA5BC,IAAI,eACV,GAAIF,QAAQ,CAACG,MAAM,GAAK,GAAG,CAAE,CACzBC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAEH,IAAI,CAACI,KAAK,CAAC,CACzCpB,cAAc,CAACgB,IAAI,CAACK,IAAI,CAAC,CACzBtB,QAAQ,KAAK,CACjB,CAAC,IAAM,CACHA,QAAQ,CAAC,QAAQ,CAAC,CACtB,CAAC,qDACJ,+CAEH,mBACE,YAAK,SAAS,CAAC,WAAW,uBAC1B,YAAK,SAAS,CAAC,gBAAgB,uBAC7B,YAAK,SAAS,CAAC,gBAAgB,uBAC/B,cAAM,QAAQ,CAAEM,YAAa,CAAC,SAAS,CAAC,YAAY,wBAClD,cAAO,OAAO,CAAC,OAAO,UAAC,QAAM,EAAQ,cACrC,cACE,IAAI,CAAC,OAAO,CACZ,EAAE,CAAC,OAAO,CACV,IAAI,CAAC,OAAO,CACZ,KAAK,CAAEF,WAAW,CAACF,KAAM,CACzB,QAAQ,CAAE,kBAAAK,CAAC,QAAIF,eAAc,gCAAMD,WAAW,MAAEF,KAAK,CAAEK,CAAC,CAACgB,MAAM,CAACC,KAAK,GAAG,EAAC,EACzE,cACF,aAAM,cACN,aAAM,cACN,cAAO,OAAO,CAAC,UAAU,UAAC,WAAS,EAAQ,cAC3C,cACE,IAAI,CAAC,UAAU,CACf,EAAE,CAAC,UAAU,CACb,IAAI,CAAC,UAAU,CACf,KAAK,CAAEpB,WAAW,CAACD,QAAS,CAC5B,QAAQ,CAAE,kBAAAI,CAAC,QAAIF,eAAc,gCAAMD,WAAW,MAAED,QAAQ,CAAEI,CAAC,CAACgB,MAAM,CAACC,KAAK,GAAG,EAAC,EAC5E,cACF,aAAM,cACN,aAAM,cACN,cAAO,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,OAAO,CAAC,SAAS,CAAC,eAAe,EAAG,GAC1D,EACH,EACA,EACA,CAEV,CAEA,cAAezB,MAAK"},"metadata":{},"sourceType":"module","externalDependencies":[]}